<div class="min-h-screen bg-gray-50 p-6">
  <!-- Page Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Financial Dashboard</h1>
    <p class="text-gray-600 mt-2">
      Overview of your income, expenses, and budget performance
    </p>
  </div>

  <!-- Loading State -->
  <div
    *ngIf="isLoading"
    class="flex flex-col items-center justify-center py-12"
  >
    <div
      class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mb-4"
    ></div>
    <p class="text-gray-600">Loading financial data...</p>
  </div>

  <!-- Financial Summary Cards -->
  <div *ngIf="!isLoading" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <!-- Total Income Card -->
    <div class="stats-card border-l-4 border-green-500">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">Total Income</p>
          <p class="text-3xl font-bold text-gray-900 mt-2">
            ${{ financialSummary?.totalIncome || 0 | number : "1.2-2" }}
          </p>
        </div>
        <div
          class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"
        >
          <i class="fas fa-arrow-down text-green-600 text-xl"></i>
        </div>
      </div>
      <div class="mt-4 flex items-center text-sm text-green-600">
        <i class="fas fa-trending-up mr-1"></i>
        <span>Positive cash flow</span>
      </div>
    </div>

    <!-- Total Expenses Card -->
    <div class="stats-card border-l-4 border-red-500">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">Total Expenses</p>
          <p class="text-3xl font-bold text-gray-900 mt-2">
            ${{ financialSummary?.totalExpenses || 0 | number : "1.2-2" }}
          </p>
        </div>
        <div
          class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center"
        >
          <i class="fas fa-arrow-up text-red-600 text-xl"></i>
        </div>
      </div>
      <div class="mt-4 flex items-center text-sm text-red-600">
        <i class="fas fa-chart-line mr-1"></i>
        <span>Track your spending</span>
      </div>
    </div>

    <!-- Balance Card -->
    <div
      class="stats-card border-l-4"
      [class.border-green-500]="(financialSummary?.balance || 0) >= 0"
      [class.border-red-500]="(financialSummary?.balance || 0) < 0"
    >
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">Current Balance</p>
          <p
            class="text-3xl font-bold mt-2"
            [class.text-green-600]="(financialSummary?.balance || 0) >= 0"
            [class.text-red-600]="(financialSummary?.balance || 0) < 0"
          >
            ${{ financialSummary?.balance || 0 | number : "1.2-2" }}
          </p>
        </div>
        <div
          class="w-12 h-12 rounded-full flex items-center justify-center"
          [class.bg-green-100]="(financialSummary?.balance || 0) >= 0"
          [class.bg-red-100]="(financialSummary?.balance || 0) < 0"
        >
          <i
            class="fas text-xl"
            [class.fa-check-circle]="(financialSummary?.balance || 0) >= 0"
            [class.fa-exclamation-circle]="(financialSummary?.balance || 0) < 0"
            [class.text-green-600]="(financialSummary?.balance || 0) >= 0"
            [class.text-red-600]="(financialSummary?.balance || 0) < 0"
          ></i>
        </div>
      </div>
      <div
        class="mt-4 flex items-center text-sm"
        [class.text-green-600]="(financialSummary?.balance || 0) >= 0"
        [class.text-red-600]="(financialSummary?.balance || 0) < 0"
      >
        <i
          class="fas mr-1"
          [class.fa-thumbs-up]="(financialSummary?.balance || 0) >= 0"
          [class.fa-thumbs-down]="(financialSummary?.balance || 0) < 0"
        ></i>
        <span>
          {{
            (financialSummary?.balance || 0) >= 0
              ? "Healthy balance"
              : "Review expenses"
          }}
        </span>
      </div>
    </div>
  </div>

  <!-- Quick Stats -->
  <div
    *ngIf="!isLoading && financialSummary"
    class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"
  >
    <div class="bg-white rounded-lg p-4 text-center shadow-sm">
      <p class="text-2xl font-bold text-indigo-600">
        {{ getIncomeCategoriesCount() }}
      </p>
      <p class="text-sm text-gray-600 mt-1">Income Sources</p>
    </div>
    <div class="bg-white rounded-lg p-4 text-center shadow-sm">
      <p class="text-2xl font-bold text-indigo-600">
        {{ getExpenseCategoriesCount() }}
      </p>
      <p class="text-sm text-gray-600 mt-1">Spending Categories</p>
    </div>
    <div class="bg-white rounded-lg p-4 text-center shadow-sm">
      <p class="text-2xl font-bold text-indigo-600">
        {{ getUtilizationRate() }}%
      </p>
      <p class="text-sm text-gray-600 mt-1">Budget Utilization</p>
    </div>
    <div class="bg-white rounded-lg p-4 text-center shadow-sm">
      <p class="text-2xl font-bold text-indigo-600">{{ getSavingsRate() }}%</p>
      <p class="text-sm text-gray-600 mt-1">Savings Rate</p>
    </div>
  </div>

  <!-- Charts Section -->
  <div *ngIf="!isLoading" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Income vs Expenses Chart -->
    <div class="chart-container">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-lg font-semibold text-gray-900">Income vs Expenses</h3>
        <div class="flex items-center space-x-2 text-sm text-gray-600">
          <div class="flex items-center">
            <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
            <span>Income</span>
          </div>
          <div class="flex items-center">
            <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
            <span>Expenses</span>
          </div>
        </div>
      </div>
      <div
        echarts
        [options]="incomeExpenseChartOption"
        class="w-full h-80"
      ></div>
    </div>

    <!-- Expenses by Category Chart -->
    <div class="chart-container">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-lg font-semibold text-gray-900">
          Expenses by Category
        </h3>
        <button
          class="btn text-sm text-indigo-600 hover:text-indigo-500 font-medium"
        >
          View Details
        </button>
      </div>
      <div echarts [options]="categoryChartOption" class="w-full h-80"></div>
    </div>
  </div>

  <!-- Recent Activity & Tips -->
  <div *ngIf="!isLoading" class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-8">
    <!-- Recent Transactions -->
    <div class="lg:col-span-2 bg-white rounded-xl shadow-sm p-6">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-lg font-semibold text-gray-900">Recent Transactions</h3>
        <a
          routerLink="/transactions"
          class="text-sm text-indigo-600 hover:text-indigo-500 font-medium"
        >
          View All
        </a>
      </div>
      <div class="space-y-4">
        <div
          *ngFor="let transaction of recentTransactions"
          class="flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg"
        >
          <div class="flex items-center">
            <div
              class="w-10 h-10 rounded-full flex items-center justify-center mr-3"
              [class.bg-green-100]="transaction.type === 'income'"
              [class.bg-red-100]="transaction.type === 'expense'"
            >
              <i
                class="fas text-sm"
                [class.fa-arrow-down]="transaction.type === 'income'"
                [class.fa-arrow-up]="transaction.type === 'expense'"
                [class.text-green-600]="transaction.type === 'income'"
                [class.text-red-600]="transaction.type === 'expense'"
              ></i>
            </div>
            <div>
              <p class="font-medium text-gray-900">
                {{ transaction.description || "No description" }}
              </p>
              <p class="text-sm text-gray-500">{{ transaction.category }}</p>
            </div>
          </div>
          <div class="text-right">
            <p
              class="font-semibold"
              [class.text-green-600]="transaction.type === 'income'"
              [class.text-red-600]="transaction.type === 'expense'"
            >
              {{ transaction.type === "income" ? "+" : "-" }}${{
                transaction.amount | number : "1.2-2"
              }}
            </p>
            <p class="text-sm text-gray-500">
              {{ transaction.date | date : "MMM d" }}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Financial Tips -->
    <div class="bg-indigo-50 rounded-xl shadow-sm p-6">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">Financial Tips</h3>
      <div class="space-y-4">
        <div class="flex items-start">
          <div
            class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"
          >
            <i class="fas fa-piggy-bank text-indigo-600 text-sm"></i>
          </div>
          <p class="text-sm text-gray-700">
            Try to save at least 20% of your income each month.
          </p>
        </div>
        <div class="flex items-start">
          <div
            class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"
          >
            <i class="fas fa-chart-pie text-indigo-600 text-sm"></i>
          </div>
          <p class="text-sm text-gray-700">
            Review your spending categories regularly to identify areas for
            improvement.
          </p>
        </div>
        <div class="flex items-start">
          <div
            class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"
          >
            <i class="fas fa-bullseye text-indigo-600 text-sm"></i>
          </div>
          <p class="text-sm text-gray-700">
            Set realistic budget goals and track your progress weekly.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
